var T=Object.defineProperty;var n=(s,e)=>T(s,"name",{value:e,configurable:!0});var v=(s,e)=>{for(var i in e)T(s,i,{get:e[i],enumerable:!0})};var S={};v(S,{testColor:()=>q,testCronExpression:()=>k,testEmail:()=>g,testIpv4Address:()=>$,testPassword:()=>y,testPath:()=>B,testPhoneNumber:()=>O,testUrl:()=>w,testUsername:()=>V,validateTime:()=>A});var k=n(s=>/^(\*|[0-9]{1,2}|\*\/[0-9]{1,2}) (\*|[0-9]{1,2}|\*\/[0-9]{1,2}) (\*|[0-9]{1,2}|\*\/[0-9]{1,2}) (\*|[0-9]{1,2}|\*\/[0-9]{1,2}) (\*|[0-9]{1,2}|\*\/[0-9]{1,2})$/.test(s),"testCronExpression"),A=n(s=>/^(?:[01]\d|2[0-3]):(?:00|30)$/.test(s),"validateTime"),g=n(s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s),"testEmail"),V=n(s=>/^[a-zA-Z0-9_]{3,16}$/.test(s),"testUsername"),y=n(s=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/.test(s),"testPassword"),O=n(s=>/^\d{10}$/.test(s),"testPhoneNumber"),$=n(s=>/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\.|$)){4}$/.test(s),"testIpv4Address"),q=n(s=>{let e=s.replace(/\s/g,"");return/^#?[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/.test(e)?e.startsWith("#"):!1},"testColor"),w=n(s=>{try{return new URL(s).href===s}catch{return!1}},"testUrl"),B=n(s=>/^\/(?:[a-zA-Z0-9_]+\/)?[a-zA-Z0-9_]*$/.test(s),"testPath");var a=class{name;description;required;checks;structure;defaultValue;constructor(e){this.name=e.name,e.description&&(this.description=e.description),this.required=e.required??!1,this.checks=e.checks??[],e.structure&&(this.structure=e.structure),this.defaultValue=e.defaultValue,this.validate()}validate(){if(!this.name)throw new Error("Name is required");if(typeof this.name!="string")throw new Error("Name must be a string");if(this.description&&typeof this.description!="string")throw new Error("Description must be a string");if(typeof this.required!="boolean")throw new Error("Required must be a boolean");if(!Array.isArray(this.checks))throw new Error("Checks must be an array");if(this.structure&&typeof this.structure!="string")throw new Error("Structure must be a string")}};n(a,"BaseValue");var p=class extends a{type="array";min;max;unique;contains;items;constructor({min:e,max:i,unique:l,contains:m,items:r,...t}){super(t),e&&(this.min=e),i&&(this.max=i),this.unique=l??!1,m&&(this.contains=m),r&&(this.items=r)}export(){return{type:this.type,name:this.name,description:this.description,required:this.required,structure:this.structure,max:this.max,min:this.min,unique:this.unique}}};n(p,"ArrayValue");var c=class extends a{type="boolean";constructor(e){super(e)}export(){return{type:this.type,name:this.name,description:this.description,required:this.required,structure:this.structure}}};n(c,"BooleanValue");var h=class extends a{type="integer";min;max;constructor(e){super(e),e.min&&(this.min=e.min),e.max&&(this.max=e.max)}export(){return{type:this.type,name:this.name,description:this.description,required:this.required,structure:this.structure}}};n(h,"IntegerValue");var f=class extends a{type="number";min;max;constructor(e){super(e),e.min&&(this.min=e.min),e.max&&(this.max=e.max)}export(){return{type:this.type,name:this.name,description:this.description,required:this.required,structure:this.structure}}};n(f,"NumberValue");var b=class extends a{type="object";properties;constructor(e){super(e),this.properties={}}export(){return{type:this.type,name:this.name,description:this.description,required:this.required,structure:this.structure}}};n(b,"ObjectValue");var d=class extends a{type="string";min;max;options;test;constructor(e){super(e),e.min&&(this.min=e.min),e.max&&(this.max=e.max),e.options&&(this.options=e.options),e.test&&(this.test=e.test)}export(){return{type:this.type,name:this.name,description:this.description,required:this.required,structure:this.structure}}};n(d,"StringValue");var x=class{schema;constructor(){this.schema={}}addArray(e){let i=new p(e);return this.schema[i.name]=i,this}addString(e){let i=new d(e);return this.schema[i.name]=i,this}addNumber(e){let i=new f(e);return this.schema[i.name]=i,this}addInteger(e){let i=new h(e);return this.schema[i.name]=i,this}addBoolean(e){let i=new c(e);return this.schema[i.name]=i,this}addObject(e){let i=new b(e);return this.schema[i.name]=i,this}async validateBase(e,i,l){if(typeof e!="object")return"The data provided must be an object.";let m=Object.entries(i);for(let[r,t]of m){if(t.required){if(!e[r]&&t.defaultValue){e[r]=t.defaultValue;break}else if(!e[r])return`The field "${t.name??r}" has not been provided.`}if(!e[r]&&t.defaultValue)return e[r]=t.defaultValue,!1;if(!e[r])return!1}for(let[r,t]of m)if(typeof e[r]!==t.type)return`The field "${t.name??r}" must be of type ${t.type}.`;for(let[r,t]of m){if(t.type==="number"){if(t.min&&t.max&&typeof e[r]=="number"&&(e[r]<t.min||e[r]>t.max))return`The field "${t.name??r}" must be between ${t.min} and ${t.max}.`;if(t.min&&typeof e[r]=="number"&&e[r]<t.min)return`The field "${t.name??r}" must be at least ${t.min}.`;if(t.max&&typeof e[r]=="number"&&e[r]>t.max)return`The field "${t.name??r}" must be less than ${t.max}.`}if(t.type==="integer"){if(t.min&&t.max&&typeof e[r]=="number"&&(e[r]<t.min||e[r]>t.max))return`The field "${t.name??r}" must be between ${t.min} and ${t.max}.`;if(t.min&&typeof e[r]=="number"&&e[r]<t.min)return`The field "${t.name??r}" must be at least ${t.min}.`;if(t.max&&typeof e[r]=="number"&&e[r]>t.max)return`The field "${t.name??r}" must be less than ${t.max}.`;if(typeof e[r]!="number"||!Number.isInteger(e[r]))return`The field "${t.name??r}" must be an integer.`}if(t.type==="string"){let u=t,o=e[r];if(t.options&&t.options.length>0&&!t.options.includes(e[r]))return`The field "${t.name??r}" is not a valid option.`;if(t.min&&t.max&&(o.length<t.min||o.length>t.max))return`The field "${t.name??r}" must be between ${t.min} and ${t.max} characters.`;if(t.min&&o.length<t.min)return`The field "${t.name??r}" must be at least ${t.min} characters.`;if(t.max&&o.length>t.max)return`The field "${t.name??r}" must be less than ${t.max} characters.`;if(u.test==="email"&&!g(o))return`The field "${t.name??r}" must be a valid email address.`;if(u.test==="username"&&!V(o))return`The field "${t.name??r}" must be a valid username.`;if(u.test==="passwordStrength"&&!y(o))return`The field "${t.name??r}" is too weak to be a valid password.`;if(u.test==="phoneNumber"&&!O(o))return`The field "${t.name??r}" must be a valid phone number.`;if(u.test==="ipAddress"&&!$(o))return`The field "${t.name??r}" must be a valid IPv4 address.`;if(u.test==="url"&&!w(o))return`The field "${t.name??r}" must be a valid IPv4 address.`;if(u.test==="path"&&!B(o))return`The field "${t.name??r}" must be a valid path.`;if(typeof e[r]!="string")return`The field "${t.name??r}" must be a string.`}if(t.checks){for(let u of t.checks)if(!await u[0](r))return`${u[1]}.`}if(t.type==="boolean"&&typeof e[r]!="boolean")return`The field "${t.name??r}" must be a boolean.`;if(t.type==="object"){if(typeof e[r]!="object")return`The field "${t.name??r}" must be an object.`;if(t.properties&&Object.keys(t.properties).length>0){let u=await this.validateBase(e[r],t.properties,!0);if(u)return u}}if(t.type==="array"){if(!Array.isArray(e[r]))return`The field "${t.name??r}" must be an array.`;if(t.items&&typeof t.items=="object")for(let u of e[r]){let o=await this.validateBase(u,t.items,!0);if(o)return o}}}return!1}async validate(e){let i=await this.validateBase(e,this.schema);return typeof i!="string"?null:i}export(){let e={};return Object.entries(this.schema).forEach(([i,l])=>{let m=l.export();e[i]=m}),e}};n(x,"Schema");var I={};v(I,{timeToCronExpression:()=>R});var R=n(s=>{if(/^([01]\d|2[0-3]):([0-5]\d)$/.test(s)){let[i,l]=s.split(":");if(!i||!l)return null;let m=i==="00"?"0":i.replace(/^0+/,"");return`${l.replace(/^0+/,"")} ${m} * * *`}return null},"timeToCronExpression");export{x as Schema,I as functions,S as tests};
//# sourceMappingURL=index.mjs.map