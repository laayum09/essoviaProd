"use strict";var g=Object.defineProperty;var k=Object.getOwnPropertyDescriptor;var A=Object.getOwnPropertyNames;var q=Object.prototype.hasOwnProperty;var n=(s,e)=>g(s,"name",{value:e,configurable:!0});var V=(s,e)=>{for(var i in e)g(s,i,{get:e[i],enumerable:!0})},R=(s,e,i,l)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of A(e))!q.call(s,a)&&a!==i&&g(s,a,{get:()=>e[a],enumerable:!(l=k(e,a))||l.enumerable});return s};var j=s=>R(g({},"__esModule",{value:!0}),s);var z={};V(z,{Schema:()=>x,functions:()=>I,tests:()=>S});module.exports=j(z);var S={};V(S,{testColor:()=>C,testCronExpression:()=>E,testEmail:()=>y,testIpv4Address:()=>B,testPassword:()=>$,testPath:()=>v,testPhoneNumber:()=>w,testUrl:()=>T,testUsername:()=>O,validateTime:()=>N});var E=n(s=>/^(\*|[0-9]{1,2}|\*\/[0-9]{1,2}) (\*|[0-9]{1,2}|\*\/[0-9]{1,2}) (\*|[0-9]{1,2}|\*\/[0-9]{1,2}) (\*|[0-9]{1,2}|\*\/[0-9]{1,2}) (\*|[0-9]{1,2}|\*\/[0-9]{1,2})$/.test(s),"testCronExpression"),N=n(s=>/^(?:[01]\d|2[0-3]):(?:00|30)$/.test(s),"validateTime"),y=n(s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s),"testEmail"),O=n(s=>/^[a-zA-Z0-9_]{3,16}$/.test(s),"testUsername"),$=n(s=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/.test(s),"testPassword"),w=n(s=>/^\d{10}$/.test(s),"testPhoneNumber"),B=n(s=>/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\.|$)){4}$/.test(s),"testIpv4Address"),C=n(s=>{let e=s.replace(/\s/g,"");return/^#?[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/.test(e)?e.startsWith("#"):!1},"testColor"),T=n(s=>{try{return new URL(s).href===s}catch{return!1}},"testUrl"),v=n(s=>/^\/(?:[a-zA-Z0-9_]+\/)?[a-zA-Z0-9_]*$/.test(s),"testPath");var u=class{name;description;required;checks;structure;defaultValue;constructor(e){this.name=e.name,e.description&&(this.description=e.description),this.required=e.required??!1,this.checks=e.checks??[],e.structure&&(this.structure=e.structure),this.defaultValue=e.defaultValue,this.validate()}validate(){if(!this.name)throw new Error("Name is required");if(typeof this.name!="string")throw new Error("Name must be a string");if(this.description&&typeof this.description!="string")throw new Error("Description must be a string");if(typeof this.required!="boolean")throw new Error("Required must be a boolean");if(!Array.isArray(this.checks))throw new Error("Checks must be an array");if(this.structure&&typeof this.structure!="string")throw new Error("Structure must be a string")}};n(u,"BaseValue");var p=class extends u{type="array";min;max;unique;contains;items;constructor({min:e,max:i,unique:l,contains:a,items:r,...t}){super(t),e&&(this.min=e),i&&(this.max=i),this.unique=l??!1,a&&(this.contains=a),r&&(this.items=r)}export(){return{type:this.type,name:this.name,description:this.description,required:this.required,structure:this.structure,max:this.max,min:this.min,unique:this.unique}}};n(p,"ArrayValue");var c=class extends u{type="boolean";constructor(e){super(e)}export(){return{type:this.type,name:this.name,description:this.description,required:this.required,structure:this.structure}}};n(c,"BooleanValue");var h=class extends u{type="integer";min;max;constructor(e){super(e),e.min&&(this.min=e.min),e.max&&(this.max=e.max)}export(){return{type:this.type,name:this.name,description:this.description,required:this.required,structure:this.structure}}};n(h,"IntegerValue");var f=class extends u{type="number";min;max;constructor(e){super(e),e.min&&(this.min=e.min),e.max&&(this.max=e.max)}export(){return{type:this.type,name:this.name,description:this.description,required:this.required,structure:this.structure}}};n(f,"NumberValue");var b=class extends u{type="object";properties;constructor(e){super(e),this.properties={}}export(){return{type:this.type,name:this.name,description:this.description,required:this.required,structure:this.structure}}};n(b,"ObjectValue");var d=class extends u{type="string";min;max;options;test;constructor(e){super(e),e.min&&(this.min=e.min),e.max&&(this.max=e.max),e.options&&(this.options=e.options),e.test&&(this.test=e.test)}export(){return{type:this.type,name:this.name,description:this.description,required:this.required,structure:this.structure}}};n(d,"StringValue");var x=class{schema;constructor(){this.schema={}}addArray(e){let i=new p(e);return this.schema[i.name]=i,this}addString(e){let i=new d(e);return this.schema[i.name]=i,this}addNumber(e){let i=new f(e);return this.schema[i.name]=i,this}addInteger(e){let i=new h(e);return this.schema[i.name]=i,this}addBoolean(e){let i=new c(e);return this.schema[i.name]=i,this}addObject(e){let i=new b(e);return this.schema[i.name]=i,this}async validateBase(e,i,l){if(typeof e!="object")return"The data provided must be an object.";let a=Object.entries(i);for(let[r,t]of a){if(t.required){if(!e[r]&&t.defaultValue){e[r]=t.defaultValue;break}else if(!e[r])return`The field "${t.name??r}" has not been provided.`}if(!e[r]&&t.defaultValue)return e[r]=t.defaultValue,!1;if(!e[r])return!1}for(let[r,t]of a)if(typeof e[r]!==t.type)return`The field "${t.name??r}" must be of type ${t.type}.`;for(let[r,t]of a){if(t.type==="number"){if(t.min&&t.max&&typeof e[r]=="number"&&(e[r]<t.min||e[r]>t.max))return`The field "${t.name??r}" must be between ${t.min} and ${t.max}.`;if(t.min&&typeof e[r]=="number"&&e[r]<t.min)return`The field "${t.name??r}" must be at least ${t.min}.`;if(t.max&&typeof e[r]=="number"&&e[r]>t.max)return`The field "${t.name??r}" must be less than ${t.max}.`}if(t.type==="integer"){if(t.min&&t.max&&typeof e[r]=="number"&&(e[r]<t.min||e[r]>t.max))return`The field "${t.name??r}" must be between ${t.min} and ${t.max}.`;if(t.min&&typeof e[r]=="number"&&e[r]<t.min)return`The field "${t.name??r}" must be at least ${t.min}.`;if(t.max&&typeof e[r]=="number"&&e[r]>t.max)return`The field "${t.name??r}" must be less than ${t.max}.`;if(typeof e[r]!="number"||!Number.isInteger(e[r]))return`The field "${t.name??r}" must be an integer.`}if(t.type==="string"){let o=t,m=e[r];if(t.options&&t.options.length>0&&!t.options.includes(e[r]))return`The field "${t.name??r}" is not a valid option.`;if(t.min&&t.max&&(m.length<t.min||m.length>t.max))return`The field "${t.name??r}" must be between ${t.min} and ${t.max} characters.`;if(t.min&&m.length<t.min)return`The field "${t.name??r}" must be at least ${t.min} characters.`;if(t.max&&m.length>t.max)return`The field "${t.name??r}" must be less than ${t.max} characters.`;if(o.test==="email"&&!y(m))return`The field "${t.name??r}" must be a valid email address.`;if(o.test==="username"&&!O(m))return`The field "${t.name??r}" must be a valid username.`;if(o.test==="passwordStrength"&&!$(m))return`The field "${t.name??r}" is too weak to be a valid password.`;if(o.test==="phoneNumber"&&!w(m))return`The field "${t.name??r}" must be a valid phone number.`;if(o.test==="ipAddress"&&!B(m))return`The field "${t.name??r}" must be a valid IPv4 address.`;if(o.test==="url"&&!T(m))return`The field "${t.name??r}" must be a valid IPv4 address.`;if(o.test==="path"&&!v(m))return`The field "${t.name??r}" must be a valid path.`;if(typeof e[r]!="string")return`The field "${t.name??r}" must be a string.`}if(t.checks){for(let o of t.checks)if(!await o[0](r))return`${o[1]}.`}if(t.type==="boolean"&&typeof e[r]!="boolean")return`The field "${t.name??r}" must be a boolean.`;if(t.type==="object"){if(typeof e[r]!="object")return`The field "${t.name??r}" must be an object.`;if(t.properties&&Object.keys(t.properties).length>0){let o=await this.validateBase(e[r],t.properties,!0);if(o)return o}}if(t.type==="array"){if(!Array.isArray(e[r]))return`The field "${t.name??r}" must be an array.`;if(t.items&&typeof t.items=="object")for(let o of e[r]){let m=await this.validateBase(o,t.items,!0);if(m)return m}}}return!1}async validate(e){let i=await this.validateBase(e,this.schema);return typeof i!="string"?null:i}export(){let e={};return Object.entries(this.schema).forEach(([i,l])=>{let a=l.export();e[i]=a}),e}};n(x,"Schema");var I={};V(I,{timeToCronExpression:()=>P});var P=n(s=>{if(/^([01]\d|2[0-3]):([0-5]\d)$/.test(s)){let[i,l]=s.split(":");if(!i||!l)return null;let a=i==="00"?"0":i.replace(/^0+/,"");return`${l.replace(/^0+/,"")} ${a} * * *`}return null},"timeToCronExpression");0&&(module.exports={Schema,functions,tests});
//# sourceMappingURL=index.js.map